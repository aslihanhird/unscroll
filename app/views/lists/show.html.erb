  <div class="pt-2 pb-2 pe-3 ps-3 edit-section">
    <h1 class="text-list"><%= @list.name %> list</h1>
    <div class="d-flex justify-content-between">
      <%= link_to edit_list_path(@list), class: 'link' do %>
        <i class="fa-regular fa-pen-to-square"></i>
      <% end %>
      <%= link_to insta_posts_path(list_id: @list.id), data: {turbo_method: "post"}, class: 'link' do %>
        <i class="fa-sharp fa-solid fa-retweet ms-3"></i>
      <% end %>
    </div>
  </div>


<div class="pt-4 container post-card">
    <% posts_left_to_see = @list.all_posts.count %>
    <% post_index_position = 1 %>
    <% @list.all_posts.each do |post| %>
      <% post_index_position += 1 %>
      <div id="<%=post_index_position - 1%>">
        <div class="d-flex justify-content-between mb-2">
            <div class="d-flex align-items-left align-items-center">
                <%= cl_image_tag(post.insta_profile.photo.key, class: "me-2 img-profile") %>
                <p class="remove-margin-bottom"><%= post.insta_profile.username  %></p>
            </div>
            <div class="d-flex justify-content-between align-items-center">
              <i class="fa-brands fa-instagram"></i>
              <%= link_to "Save", lists_path, class: "link button-dark ms-3" %>
            </div>
        </div>

        <% if post.video.attached? %>
          <%= cl_video_tag(post.video.key, class: "mb-2 img-post", preload: "none", controls: true) %>
        <% else %>
          <%= cl_image_tag(post.photo.key, class:"mb-2 img-post") %>
        <% end %>
        <p class="margin-bottom-caption"><%= post.caption %></p>

        <% posts_left_to_see -= 1 %>
        <% if posts_left_to_see == 0 %>
          <div class="center-margin-300">
            <h2 class="mb-5">You saw all the posts of <%= @list.name %></h2>
            <%= link_to "See all the lists", lists_path, class: "mb-2 link button-gray" %>
          </div>
          <% else %>
        <% end %>
      </div>
    <% end %>
</div>
